# Echo Server 代码审查清单（Review Checklist）

所有 PR 必须逐项检查。未满足任何一项不得合并。

## 1. 正确性与一致性
- 变更是否保持 `pts/qts/seq/updates` 单调递增与可回放？
- 是否存在状态不一致或不可验证路径？
- 是否引入了临时兼容或“先跑起来”的逻辑？

## 2. 协议与兼容性
- TL 对象与字段是否完整、类型匹配？
- RPC 错误码是否符合协议？
- Layer 版本与客户端一致？

## 3. 数据库与事务
- 事务边界是否正确？
- 失败路径是否回滚并有明确错误？
- 关键索引/唯一约束是否与业务一致？

## 4. 错误处理与日志
- 所有错误是否被正确返回与记录？
- 日志是否包含必要上下文且不泄露敏感信息？

## 5. 性能与资源
- 是否引入了无界队列或潜在 goroutine 泄漏？
- 热路径是否有明显性能退化？

## 6. 测试
- 是否新增或更新了对应测试？
- 关键一致性路径是否有回归验证？

## 7. 文档与变更记录
- 是否新增或更新变更记录（`docs/core/changes/`）？
- CHANGELOG 是否包含 `[Unreleased]` 条目？

## 8. 配置与启动规则
- `cmd/*/main.go` 是否保持无硬编码配置？
- 新配置是否可通过 `configs/*.yaml` 管理？

## 9. 客户端保护
- 是否未修改 `echo-android-client` 业务逻辑代码？

